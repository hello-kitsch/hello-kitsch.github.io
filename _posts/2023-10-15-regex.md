---
layout: post
title: Python regex
subtitle: 파이썬 정규표현식 문법 정리
category: knowledge
tags: [python, regex]
comments: true
use_math: true
author: jyesoon
---
# 1. 메타문자  

- []: 문자 클래스(문자 클래스로 만들어진 정규식은 '['와 ']'사이의 문자들과 매치)
  - `\d`:숫자
  - `\D`:숫자가 아닌 것
  - `\s`: 화이트스페이스 문자(`\t`,`\n`,`\r`,`\f`,`\v`)
  - `\S`: 화이트스페이스 문자가 아닌 것
  - `\w`: 문자+숫자
  - `\W`: 문자+숫자 가 아닌 문자
- .: `\n`을 제외한 모든 문자와 매치
- *: 반복을 의미
- +: (최소 1번 이상) 반복을 의미
- {}: {m,n}은 반복횟수가 m부터 n까지의 문자와 매치
- ?: {0,1}을 의미

# 2. re 모듈  

- regular expression 모듈, 정규 표현식을 지원
- re.compile()의 리턴값 = 컴파일된 **패턴 객체** 

# 3. 문자열 검색  

: 정규식에서 컴파일된 패턴 객체에 적용할 메서드
- match(): 문자열의 처음부터 정규식과 매치되는지 조사
- search(): 문자열 전체를 검색하여 정규식과 매치되는지 조사
- findall(): 정규식과 매치되는 모든 문자열을 리스트로 리턴
- finditer(): 정규식과 매치되는 모든 문자열을 반복가능한 객체로 리턴
> - match 객체를 반환

# 4. match 객체의 메서드  

- group(): 매치된 문자열 리턴
- start(): 매치된 문자열의 시작 위치 리턴
- end(): 매치된 문자열의 끝 위치 리턴
- span(): 매치된 문자열의 (시작, 끝)-튜플 리턴

# 5. 컴파일 옵션 -> re.compile('a-z', re.option)  

- DOTALL (S): .이 줄바꿈문자를 포함해 모든 문자와 매치
- IGNORECASE (I): 대소문자에 관계없이 매치
- MULTILINE (M): 여러 줄과 매치(문자열의 처음`^`,마지막`$` 메타문자사용시 각 라인의 처음`^`, 마지막`$`으로 인식)
- VERBOSE (X): verbose모드 사용(정규식을 보기 편하게, 주석 사용 가능)

# 6. 역슬래시  

- 역슬래시 자체를 표현하고 싶을때
  - `\\->\`, `\\\\->\\`
 - `re.compile(r'\\')`

# 7. 문자열 소비가 없는 메타 문자  

- +, *, [], {} 등의 메타문자는 매치가 성사되면 문자열을 탐색하는 시작 위치가 변경됨(=소비)
- 소비가 없는 메타 문자
  - \|: or
  - ^: 문자열의 맨 처음과 매치한다는 것
  - `$`: 문자열의 끝과 매치한다는 것
  - \A: `re.MULTILNE`옵션과 상관없이 전체 문자열의 처음과 매치
  - \Z: `re.MULTILNE`옵션과 상관없이 전체 문자열의 끝과 매치
  - \b: 단어 구분자(화이트스페이스에 의해 구분되는), r(rawstring표시 필요)
  - \B: 화이트스페이스로 구분된 단어가 아닌 경우에만 매치
  
# 8. 그루핑  

- 그룹을 만들어주는 메타 문자: `()`
- group(n) 메서드(인덱스n): 그루핑된 부분의 문자열만 뽑아낼 수 있음
- 그룹 재참조 문자: `\i` (인덱스 숫자 i)
- 그루핑 네이밍: (?P<그룹명>...) -> group(그룹명) 메서드 사용 가능
  - 정규식 안에서 재참조: (?P=그룹이름)
  
# 9. 전방 탐색  

- 긍정형 전방 탐색 `(?=...)`: `...`에 해당하는 정규식과 매치되어야 하며 조건이 통과되어도 문자열이 소비되지 않음.(탐색 시작 위치가 바뀌지 않음)
- 부정형 전방 탐색 `(?!...)`: `...`에 해당하는 정규식과 매치되지 않아야하며 조건이 통과되어도 문자열이 소비되지 않음

# 10. 문자열 바꾸기  

- `p = re.compile('...')`
`p.sub('...', '...'_)` sub메서드의 첫 번째 인수는 바꿀 문자열, 두 번째 인수는 대상 문자열, 세번째 인수는 count 설정 가능
- `subn('...', '...')` -> (변경된 문자열, 바꾸기가 발생한 횟수) 튜플로 리턴
- sub메서드에 참조구문 사용 가능(그룹 이름, 참조번호를 바꿀 문자열에 적용 가능)
- sub메서드의 첫번째 인수에 함수 전달 가능

# 11.greedy와 non-greedy  

- greedy: \*메타문자
- non-greedy: ?메타 문자(보통 탐욕을 제한하고자 하는 문자 뒤에 씀)